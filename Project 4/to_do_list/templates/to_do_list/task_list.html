{% extends 'base.html' %}
{% block title %}My To-Do List{% endblock %}
{% block content %}
<div class="card">
    <h1>My To-Do List</h1>

    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Add Task</button>
    </form>

    <ul>
        {% for task in tasks %}
            <li class="{% if task.completed %}completed{% endif %}">
                <strong>{{ task.title }}</strong>
                {% if task.description %}<p>{{ task.description }}</p>{% endif %}
                <small>Category: {{ task.get_category_display }} | Due: {{ task.due_date|default:"None" }}</small>

                <div>
                    <a href="{% url 'toggle_complete' task.id %}">
                        {% if task.completed %}Mark Incomplete{% else %}Mark Complete{% endif %}
                    </a> |
                    <a href="{% url 'edit_task' task.id %}">Edit</a> |
                    <a href="{% url 'delete_task' task.id %}">Delete</a>
                </div>
            </li>
        {% empty %}
            <li>No tasks yet!</li>
        {% endfor %}
    </ul>

    <p><a href="{% url 'logout' %}">Logout</a></p>
</div>
{% endblock %}